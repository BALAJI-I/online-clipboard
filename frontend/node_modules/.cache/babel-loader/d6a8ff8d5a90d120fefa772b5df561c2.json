{"ast":null,"code":"import { useState, useEffect } from 'react';\nimport { env } from './env';\nvar cache = new WeakMap();\nvar NO_OPTIONS = {};\nexport function useSidecar(importer, effect) {\n  var options = effect && effect.options || NO_OPTIONS;\n\n  if (env.isNode && !options.ssr) {\n    return [null, null];\n  } // eslint-disable-next-line react-hooks/rules-of-hooks\n\n\n  return useRealSidecar(importer, effect);\n}\n\nfunction useRealSidecar(importer, effect) {\n  var options = effect && effect.options || NO_OPTIONS;\n  var couldUseCache = env.forceCache || env.isNode && !!options.ssr || !options.async;\n\n  var _a = useState(couldUseCache ? function () {\n    return cache.get(importer);\n  } : undefined),\n      Car = _a[0],\n      setCar = _a[1];\n\n  var _b = useState(null),\n      error = _b[0],\n      setError = _b[1];\n\n  useEffect(function () {\n    if (!Car) {\n      importer().then(function (car) {\n        var resolved = effect ? effect.read() : car.default || car;\n\n        if (!resolved) {\n          console.error('Sidecar error: with importer', importer);\n          var error_1;\n\n          if (effect) {\n            console.error('Sidecar error: with medium', effect);\n            error_1 = new Error('Sidecar medium was not found');\n          } else {\n            error_1 = new Error('Sidecar was not found in exports');\n          }\n\n          setError(function () {\n            return error_1;\n          });\n          throw error_1;\n        }\n\n        cache.set(importer, resolved);\n        setCar(function () {\n          return resolved;\n        });\n      }, function (e) {\n        return setError(function () {\n          return e;\n        });\n      });\n    }\n  }, []);\n  return [Car, error];\n}","map":{"version":3,"sources":["C:/Users/jeswa/Documents/online-clipboard/frontend/node_modules/use-sidecar/dist/es2015/hook.js"],"names":["useState","useEffect","env","cache","WeakMap","NO_OPTIONS","useSidecar","importer","effect","options","isNode","ssr","useRealSidecar","couldUseCache","forceCache","async","_a","get","undefined","Car","setCar","_b","error","setError","then","car","resolved","read","default","console","error_1","Error","set","e"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,GAAT,QAAoB,OAApB;AACA,IAAIC,KAAK,GAAG,IAAIC,OAAJ,EAAZ;AACA,IAAIC,UAAU,GAAG,EAAjB;AACA,OAAO,SAASC,UAAT,CAAoBC,QAApB,EAA8BC,MAA9B,EAAsC;AACzC,MAAIC,OAAO,GAAID,MAAM,IAAIA,MAAM,CAACC,OAAlB,IAA8BJ,UAA5C;;AACA,MAAIH,GAAG,CAACQ,MAAJ,IAAc,CAACD,OAAO,CAACE,GAA3B,EAAgC;AAC5B,WAAO,CAAC,IAAD,EAAO,IAAP,CAAP;AACH,GAJwC,CAKzC;;;AACA,SAAOC,cAAc,CAACL,QAAD,EAAWC,MAAX,CAArB;AACH;;AACD,SAASI,cAAT,CAAwBL,QAAxB,EAAkCC,MAAlC,EAA0C;AACtC,MAAIC,OAAO,GAAID,MAAM,IAAIA,MAAM,CAACC,OAAlB,IAA8BJ,UAA5C;AACA,MAAIQ,aAAa,GAAGX,GAAG,CAACY,UAAJ,IAAmBZ,GAAG,CAACQ,MAAJ,IAAc,CAAC,CAACD,OAAO,CAACE,GAA3C,IAAmD,CAACF,OAAO,CAACM,KAAhF;;AACA,MAAIC,EAAE,GAAGhB,QAAQ,CAACa,aAAa,GAAG,YAAY;AAAE,WAAOV,KAAK,CAACc,GAAN,CAAUV,QAAV,CAAP;AAA6B,GAA9C,GAAiDW,SAA/D,CAAjB;AAAA,MAA4FC,GAAG,GAAGH,EAAE,CAAC,CAAD,CAApG;AAAA,MAAyGI,MAAM,GAAGJ,EAAE,CAAC,CAAD,CAApH;;AACA,MAAIK,EAAE,GAAGrB,QAAQ,CAAC,IAAD,CAAjB;AAAA,MAAyBsB,KAAK,GAAGD,EAAE,CAAC,CAAD,CAAnC;AAAA,MAAwCE,QAAQ,GAAGF,EAAE,CAAC,CAAD,CAArD;;AACApB,EAAAA,SAAS,CAAC,YAAY;AAClB,QAAI,CAACkB,GAAL,EAAU;AACNZ,MAAAA,QAAQ,GAAGiB,IAAX,CAAgB,UAAUC,GAAV,EAAe;AAC3B,YAAIC,QAAQ,GAAGlB,MAAM,GAAGA,MAAM,CAACmB,IAAP,EAAH,GAAmBF,GAAG,CAACG,OAAJ,IAAeH,GAAvD;;AACA,YAAI,CAACC,QAAL,EAAe;AACXG,UAAAA,OAAO,CAACP,KAAR,CAAc,8BAAd,EAA8Cf,QAA9C;AACA,cAAIuB,OAAJ;;AACA,cAAItB,MAAJ,EAAY;AACRqB,YAAAA,OAAO,CAACP,KAAR,CAAc,4BAAd,EAA4Cd,MAA5C;AACAsB,YAAAA,OAAO,GAAG,IAAIC,KAAJ,CAAU,8BAAV,CAAV;AACH,WAHD,MAIK;AACDD,YAAAA,OAAO,GAAG,IAAIC,KAAJ,CAAU,kCAAV,CAAV;AACH;;AACDR,UAAAA,QAAQ,CAAC,YAAY;AAAE,mBAAOO,OAAP;AAAiB,WAAhC,CAAR;AACA,gBAAMA,OAAN;AACH;;AACD3B,QAAAA,KAAK,CAAC6B,GAAN,CAAUzB,QAAV,EAAoBmB,QAApB;AACAN,QAAAA,MAAM,CAAC,YAAY;AAAE,iBAAOM,QAAP;AAAkB,SAAjC,CAAN;AACH,OAjBD,EAiBG,UAAUO,CAAV,EAAa;AAAE,eAAOV,QAAQ,CAAC,YAAY;AAAE,iBAAOU,CAAP;AAAW,SAA1B,CAAf;AAA6C,OAjB/D;AAkBH;AACJ,GArBQ,EAqBN,EArBM,CAAT;AAsBA,SAAO,CAACd,GAAD,EAAMG,KAAN,CAAP;AACH","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { env } from './env';\r\nvar cache = new WeakMap();\r\nvar NO_OPTIONS = {};\r\nexport function useSidecar(importer, effect) {\r\n    var options = (effect && effect.options) || NO_OPTIONS;\r\n    if (env.isNode && !options.ssr) {\r\n        return [null, null];\r\n    }\r\n    // eslint-disable-next-line react-hooks/rules-of-hooks\r\n    return useRealSidecar(importer, effect);\r\n}\r\nfunction useRealSidecar(importer, effect) {\r\n    var options = (effect && effect.options) || NO_OPTIONS;\r\n    var couldUseCache = env.forceCache || (env.isNode && !!options.ssr) || !options.async;\r\n    var _a = useState(couldUseCache ? function () { return cache.get(importer); } : undefined), Car = _a[0], setCar = _a[1];\r\n    var _b = useState(null), error = _b[0], setError = _b[1];\r\n    useEffect(function () {\r\n        if (!Car) {\r\n            importer().then(function (car) {\r\n                var resolved = effect ? effect.read() : car.default || car;\r\n                if (!resolved) {\r\n                    console.error('Sidecar error: with importer', importer);\r\n                    var error_1;\r\n                    if (effect) {\r\n                        console.error('Sidecar error: with medium', effect);\r\n                        error_1 = new Error('Sidecar medium was not found');\r\n                    }\r\n                    else {\r\n                        error_1 = new Error('Sidecar was not found in exports');\r\n                    }\r\n                    setError(function () { return error_1; });\r\n                    throw error_1;\r\n                }\r\n                cache.set(importer, resolved);\r\n                setCar(function () { return resolved; });\r\n            }, function (e) { return setError(function () { return e; }); });\r\n        }\r\n    }, []);\r\n    return [Car, error];\r\n}\r\n"]},"metadata":{},"sourceType":"module"}